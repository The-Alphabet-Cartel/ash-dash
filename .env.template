# ======================================================= #
# Ash-Dash v5.0 Environment Variables Template
# ======================================================= #
# FILE VERSION: v5.0-10-10.1.3-1
# LAST MODIFIED: 2026-01-10
# CLEAN ARCHITECTURE: Compliant
# Repository: https://github.com/the-alphabet-cartel/ash-dash
# Community: The Alphabet Cartel - https://discord.gg/alphabetcartel | https://alphabetcartel.org
#
# USAGE:
#   1. Copy this file to .env
#   2. Modify values as needed
#   3. Environment variables OVERRIDE JSON config defaults
#
# ⚠️  SECRETS WARNING:
#   Do NOT put API tokens or passwords in this file!
#   Use Docker Secrets instead: ./secrets/
#   See secrets/README.md for setup instructions
#
# ------------------------------------------------------- #
# VARIABLE_NAME=value                                     # Description (default: X)
# Comments regarding use of previous variable
# More comments
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# GLOBAL VARIABLES
# ======================================================= #
# ------------------------------------------------------- #
# USER/GROUP ID (LinuxServer.io Style)
# ------------------------------------------------------- #
# Set these to match your host user for correct file permissions.
# Find your IDs by running 'id' on your host system.
#
# Example output: uid=1000(bubba) gid=1000(bubba) ...
#   PUID=1000
#   PGID=1000
# ------------------------------------------------------- #
PUID=1001                                                 # User ID to run container as (default: 1000)
PGID=1001                                                 # Group ID to run container as (default: 1000)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# TIMEZONE - Used by Docker and the application
# ------------------------------------------------------- #
TZ=America/Los_Angeles                                    # Server timezone (default: UTC)
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# ASH-DASH SERVER CONFIGURATION
# ======================================================= #
# ------------------------------------------------------- #
# ENVIRONMENT
# ------------------------------------------------------- #
DASH_ENVIRONMENT=production                               # production, testing (default: production)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# SERVER SETTINGS
# ------------------------------------------------------- #
DASH_HOST=0.0.0.0                                         # Host to bind to (default: 0.0.0.0)
DASH_PORT=30883                                           # Port to listen on (default: 30883)
DASH_DEBUG=false                                          # Enable debug mode (default: false)
DASH_WORKERS=1                                            # Number of uvicorn workers (default: 1)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# LOGGING CONFIGURATION
# ------------------------------------------------------- #
DASH_LOG_LEVEL=INFO                                       # Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL (default: INFO)
DASH_LOG_FORMAT=human                                     # Log format: json, human (default: human)
DASH_LOG_FILE=/app/logs/ash-dash.log                      # Log output file path (default: /app/logs/ash-dash.log)
DASH_LOG_CONSOLE=true                                     # Enable console logging (default: true)
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# AUTHENTICATION (Pocket-ID) - Phase 10
# ======================================================= #
# ------------------------------------------------------- #
# Authentication Toggle
# ------------------------------------------------------- #
# Set to false to disable authentication (development only!)
# WARNING: Never disable in production!
# ------------------------------------------------------- #
DASH_AUTH_ENABLED=true                                    # Enable authentication (default: true)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# Pocket-ID Configuration
# ------------------------------------------------------- #
# Pocket-ID is the OIDC provider for The Alphabet Cartel.
# These settings control JWT validation and issuer verification.
# ------------------------------------------------------- #
DASH_AUTH_COOKIE_NAME=pocket_id_session                   # Cookie name for session JWT (default: pocket_id_session)
DASH_POCKET_ID_ISSUER=https://id.alphabetcartel.net       # Pocket-ID issuer URL (default: https://id.alphabetcartel.net)
DASH_POCKET_ID_JWKS_URL=https://id.alphabetcartel.net/.well-known/jwks.json  # JWKS endpoint for JWT verification
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# CRT Group Configuration
# ------------------------------------------------------- #
# These Pocket-ID groups control access to Ash-Dash:
#   cartel_crt        -> Member (base CRT access)
#   cartel_crt_lead   -> Lead   (member + reopen, unlock, retention)
#   cartel_crt_admin  -> Admin  (full access)
#
# Users without any of these groups get 403 Forbidden.
# Users with multiple groups get the highest role.
# ------------------------------------------------------- #
# Note: These defaults are set in default.json. Only override if
# your Pocket-ID uses different group names.
# DASH_AUTH_REQUIRED_GROUPS=[
#   "cartel_crt",
#   "cartel_crt_lead",
#   "cartel_crt_admin"
# ]
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# REDIS CONFIGURATION (Shared with Ash-Bot)
# ======================================================= #
# ------------------------------------------------------- #
# Connection Settings
# ------------------------------------------------------- #
REDIS_HOST=ash-redis                                      # Redis hostname (default: ash-redis)
REDIS_PORT=6379                                           # Redis port (default: 6379)
REDIS_DB=0                                                # Redis database number (default: 0)
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# POSTGRESQL DATABASE CONFIGURATION
# ======================================================= #
# ------------------------------------------------------- #
# Connection Settings
# ------------------------------------------------------- #
# Note: Password is read from Docker secret: secrets/postgres_token
# The DatabaseManager builds the connection URL automatically.
# ------------------------------------------------------- #
DATABASE_HOST=ash-dash-db                                 # PostgreSQL hostname (default: ash-dash-db)
DATABASE_PORT=5432                                        # PostgreSQL port (default: 5432)
DATABASE_NAME=ashdash                                     # Database name (default: ashdash)
DATABASE_USER=ash                                         # Database user (default: ash)
DATABASE_POOL_SIZE=5                                      # Connection pool size (default: 5)
DATABASE_MAX_OVERFLOW=10                                  # Max overflow connections (default: 10)
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# MINIO ARCHIVE STORAGE (Syn VM)
# ======================================================= #
# ------------------------------------------------------- #
# MinIO Connection Settings
# ------------------------------------------------------- #
# MinIO runs on the Syn VM (10.20.30.202) and provides
# S3-compatible object storage for session archives.
#
# Note: Credentials are read from Docker secrets:
#   - secrets/minio_root_user
#   - secrets/minio_root_password
# ------------------------------------------------------- #
DASH_MINIO_ENDPOINT=10.20.30.202                          # MinIO server hostname (default: 10.20.30.202)
DASH_MINIO_PORT=30884                                     # MinIO API port (default: 30884)
DASH_MINIO_SECURE=false                                   # Use HTTPS (default: false)
# ------------------------------------------------------- #

# ------------------------------------------------------- #
# MinIO Bucket Names
# ------------------------------------------------------- #
DASH_MINIO_BUCKET_ARCHIVES=ash-archives                   # Encrypted session archives (default: ash-archives)
DASH_MINIO_BUCKET_DOCUMENTS=ash-documents                 # Document backups (default: ash-documents)
DASH_MINIO_BUCKET_EXPORTS=ash-exports                     # PDF exports, reports (default: ash-exports)
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# POLLING INTERVALS
# ======================================================= #
# ------------------------------------------------------- #
# Refresh Rates (in seconds)
# ------------------------------------------------------- #
DASH_POLL_DASHBOARD=30                                    # Dashboard metrics refresh interval (default: 30)
DASH_POLL_SESSIONS=10                                     # Active sessions refresh interval (default: 10)
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# ALERTING CONFIGURATION
# ======================================================= #
# ------------------------------------------------------- #
# Discord Webhook Alerting
# ------------------------------------------------------- #
DASH_ALERTING_ENABLED=true                                # Enable Discord alerting (default: true)
#
# Note: Discord webhook URL should be in secrets/discord_alert_token
# See secrets/README.md for setup instructions
# ------------------------------------------------------- #
# ======================================================= #


# ======================================================= #
# ⚠️  SECRETS REMINDER
# ======================================================= #
# Do NOT put secrets in this file! Use Docker Secrets:
#
# Required:
#   secrets/postgres_token     - PostgreSQL password
#
# Required for Archive Storage (Phase 8+):
#   secrets/minio_root_user     - MinIO username
#   secrets/minio_root_password - MinIO password
#
# Required for Archive Encryption (Phase 9):
#   secrets/archive_master_key - AES-256 encryption key
#
# Optional:
#   secrets/discord_alert_token - Discord webhook URL for system alerts
#   secrets/redis_token         - Redis password
#
# Example:
#   echo "your-secret-password" > secrets/postgres_token
#   chmod 600 secrets/postgres_token
#
# See secrets/README.md for full instructions
# ======================================================= #


# ======================================================= #
# END OF CONFIGURATION
# ======================================================= #
